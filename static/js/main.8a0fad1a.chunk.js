(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{156:function(e,t){},158:function(e,t){},176:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),i=a(10),o=a.n(i),r=a(11),s=a(32),l=a(228),d=a(100),m=a(207),b=a(212),j=a(232),p=a(227),u=a(221),g=a(220),h=a(229),O=a(210),f=a(99),x=a(91),k=a(63),y=a.n(k),H=a(3),w=Object(c.createContext)(),v=Object(x.io)("https://cpsc581-p2.herokuapp.com/"),C=function(e){var t=e.children,a=Object(c.useState)(!1),n=Object(r.a)(a,2),i=n[0],o=n[1],s=Object(c.useState)(!1),l=Object(r.a)(s,2),d=l[0],m=l[1],b=Object(c.useState)(),j=Object(r.a)(b,2),p=j[0],u=j[1],g=Object(c.useState)(""),h=Object(r.a)(g,2),O=h[0],f=h[1],x=Object(c.useState)({}),k=Object(r.a)(x,2),C=k[0],N=k[1],S=Object(c.useState)(""),Y=Object(r.a)(S,2),T=Y[0],I=Y[1],B=Object(c.useState)(""),D=Object(r.a)(B,2),P=D[0],A=D[1],R=Object(c.useState)(-1),z=Object(r.a)(R,2),E=z[0],W=z[1],U=Object(c.useState)(0),J=Object(r.a)(U,2),L=J[0],V=J[1],F=Object(c.useState)(0),M=Object(r.a)(F,2),G=M[0],K=M[1],q=Object(c.useState)(["Homework Yuck!","Hammy the Hamster"]),Q=Object(r.a)(q,2),X=Q[0],Z=Q[1],$=Object(c.useRef)(),_=Object(c.useRef)(),ee=Object(c.useRef)();Object(c.useEffect)((function(){v.on("turnPage",(function(e){console.log("Found Page: ".concat(e)),V(e)})),v.on("changeBook",(function(e){console.log("New book: ".concat(e)),V(0),W(e)})),v.on("me",(function(e){return I(e)})),v.on("callUser",(function(e){var t=e.from,a=e.name,c=e.signal,n=e.book;console.log("Client Book: ".concat(n)),W(n),N({isReceivingCall:!0,from:t,name:a,signal:c})}))}),[]),Object(c.useEffect)((function(){0!==G&&(console.log("Started!!!"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){u(e),$.current.srcObject=e})))}),[G]),Object(c.useEffect)((function(){L>0&&(console.log("Page Turned: "+L),te(P))}),[L]),Object(c.useEffect)((function(){E>-1&&ae(E)}),[E]);var te=function(e){console.log("in turn page ".concat(e)),v.emit("turnPage",{targetCaller:e,pageNumber:L})},ae=function(){console.log("changing book to: ".concat(E," with user ").concat(P)),v.emit("changeBook",{targetCaller:P,bookId:E})};return Object(H.jsx)(w.Provider,{value:{call:C,callAccepted:i,myVideo:$,userVideo:_,stream:p,name:O,setName:f,callEnded:d,me:T,book:E,pageNumber:L,started:G,setStarted:K,setPageNumber:V,setBook:W,callUser:function(e){A(e);var t=new y.a({initiator:!0,trickle:!1,stream:p});t.on("signal",(function(t){v.emit("callUser",{userToCall:e,signalData:t,from:T,name:O,book:E})})),t.on("stream",(function(e){_.current.srcObject=e})),v.on("callAccepted",(function(e){o(!0),t.signal(e)})),ee.current=t},leaveCall:function(){m(!0),ee.current.destroy(),window.location.reload()},answerCall:function(){o(!0);var e=new y.a({initiator:!1,trickle:!1,stream:p});e.on("signal",(function(e){console.log(C.from),A(C.from),v.emit("answerCall",{signal:e,to:C.from})})),e.on("stream",(function(e){_.current.srcObject=e})),e.signal(C.signal),ee.current=e},turnPage:te,bookTitles:X,setBookTitles:Z},children:t})},N=a.p+"static/media/HomeworkYuck-01.03283a7f.png",S=a.p+"static/media/HomeworkYuck-02.f0dd020a.png",Y=a.p+"static/media/HomeworkYuck-03.5893ecb5.png",T=a.p+"static/media/HomeworkYuck-04.f0e26d0c.png",I=a.p+"static/media/HomeworkYuck-05.fffc6142.png",B=a.p+"static/media/HomeworkYuck-06.41fab4dd.png",D=a.p+"static/media/HomeworkYuck-07.5253d44c.png",P=a.p+"static/media/HomeworkYuck-08.bc4e84f2.png",A=a.p+"static/media/HomeworkYuck-09.aa661414.png",R=a.p+"static/media/HomeworkYuck-10.06de20bd.png",z=a.p+"static/media/HomeworkYuck-11.92c4f756.png",E=a.p+"static/media/HomeworkYuck-12.61697216.png",W=a.p+"static/media/HomeworkYuck-13.b067cbfb.png",U=a.p+"static/media/HomeworkYuck-14.ab43fb07.png",J=a.p+"static/media/HomeworkYuck-15.4f3bfec9.png",L=a.p+"static/media/HomeworkYuck-16.808be050.png",V=a.p+"static/media/HomeworkYuck-17.16bebce2.png",F=a.p+"static/media/HomeworkYuck-18.f93ae2f3.png",M=a.p+"static/media/HomeworkYuck-19.fb9616a9.png",G=a.p+"static/media/HomeworkYuck-20.94abdd28.png",K=a.p+"static/media/HomeworkYuck-21.ad906566.png",q=a.p+"static/media/HomeworkYuck-22.3f0b1014.png",Q=a.p+"static/media/HomeworkYuck-23.7d056ac3.png",X=a.p+"static/media/HomeworkYuck-24.b9dbff2d.png",Z=a.p+"static/media/HomeworkYuck-25.c08eaea4.png",$=a.p+"static/media/HammyTheHamster-01.b0046e30.png",_=a.p+"static/media/HammyTheHamster-02.738c253c.png",ee=a.p+"static/media/HammyTheHamster-03.e4968da4.png",te=a.p+"static/media/HammyTheHamster-04.02767372.png",ae=a.p+"static/media/HammyTheHamster-05.3eddcdf6.png",ce=a.p+"static/media/HammyTheHamster-06.92215c09.png",ne=a.p+"static/media/HammyTheHamster-07.ee5a7111.png",ie=a.p+"static/media/HammyTheHamster-08.1b12032f.png",oe=a.p+"static/media/HammyTheHamster-09.5f6430bb.png",re=a.p+"static/media/HammyTheHamster-10.143f0710.png",se=a.p+"static/media/HammyTheHamster-11.7b040adb.png",le=a.p+"static/media/HammyTheHamster-12.52e5b3ed.png",de=a.p+"static/media/HammyTheHamster-13.a6bb5b93.png",me=a.p+"static/media/HammyTheHamster-14.2b7c06a3.png",be=a.p+"static/media/HammyTheHamster-15.c9940d91.png",je=a.p+"static/media/HammyTheHamster-16.130301f6.png",pe=a(213),ue=a(214),ge=Object(m.a)((function(e){return{video:Object(s.a)({width:"100%",marginTop:"10px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:{justifyContent:"center"},paper:{padding:"10px",border:"2px solid black",margin:"10px"},button:{padding:"10px"}}})),he=function(){var e=n.a.useState([N,S,Y,T,I,B,D,P,A,R,z,E,W,U,J,L,V,F,M,G,K,q,Q,X,Z]),t=Object(r.a)(e,2),a=t[0],i=(t[1],n.a.useState([$,_,ee,te,ae,ce,ne,ie,oe,re,se,le,de,me,be,je])),o=Object(r.a)(i,2),s=o[0],l=(o[1],n.a.useState([a,s])),d=Object(r.a)(l,2),m=d[0],j=(d[1],Object(c.useContext)(w)),p=(j.name,j.callAccepted),u=j.myVideo,g=j.userVideo,h=j.callEnded,x=j.stream,k=(j.call,j.pageNumber),y=j.book,v=j.setPageNumber,C=ge();return Object(H.jsxs)(O.a,{container:!0,className:C.gridContainer,children:[x&&Object(H.jsxs)(O.a,{item:!0,xs:12,md:4,children:[Object(H.jsx)("video",{playsInline:!0,muted:!0,ref:u,autoPlay:!0,className:C.video}),p&&!h&&Object(H.jsx)("video",{playsInline:!0,ref:g,autoPlay:!0,className:C.video})]}),p&&!h&&Object(H.jsx)(O.a,{item:!0,xs:12,md:8,children:Object(H.jsxs)(f.a,{className:C.paper,children:[Object(H.jsx)("img",{style:{width:"100%"},src:m[y][k]}),Object(H.jsxs)("div",{children:[Object(H.jsx)(b.a,{onClick:function(){return v(k-1)},className:C.button,variant:"contained",startIcon:Object(H.jsx)(pe.a,{fontSize:"large"}),color:"primary",children:"Back"}),Object(H.jsx)(b.a,{onClick:function(){return v(k+1)},style:{position:"relative",float:"right"},className:C.button,variant:"contained",endIcon:Object(H.jsx)(ue.a,{fontSize:"large"}),color:"primary",children:"Next"})]})]})})]})},Oe=a(215),fe=a(230),xe=a(97),ke=a(216),ye=a(217),He=a(218),we=a(219),ve=a(222),Ce=a(223),Ne=a(226),Se=a(225),Ye=a(224),Te=Object(m.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(s.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(s.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{paddingLeft:20,paddingRight:20,padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),Ie=function(e){var t=e.children,a=Object(c.useContext)(w),n=a.me,i=a.callAccepted,o=a.name,s=a.setName,l=a.callEnded,m=a.leaveCall,h=a.callUser,x=a.book,k=a.setBook,y=(a.turnPage,a.pageNumber,a.setPageNumber),v=Object(c.useState)(""),C=Object(r.a)(v,2),S=C[0],Y=C[1],T=Te(),I=Object(c.useState)(!1),B=Object(r.a)(I,2),D=B[0],P=B[1],A=function(){P(!1)};return Object(H.jsxs)("div",{children:[Object(H.jsx)(Oe.a,{className:T.container,children:Object(H.jsxs)(f.a,{elevation:10,className:T.paper,children:[Object(H.jsx)("form",{className:T.root,noValidate:!0,autoComplete:"off",children:Object(H.jsxs)(O.a,{container:!0,className:T.gridContainer,children:[Object(H.jsx)(O.a,{item:!0,xs:12,md:12,className:T.padding,children:Object(H.jsx)(b.a,{onClick:function(){P(!0)},variant:"contained",color:"primary",startIcon:Object(H.jsx)(ke.a,{fontSize:"large"}),fullWidth:!0,className:T.margin,children:"Bookshelf"})}),Object(H.jsxs)(O.a,{item:!0,xs:12,md:6,className:T.padding,children:[Object(H.jsx)(d.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(H.jsx)(fe.a,{label:"Name",value:o,onChange:function(e){return s(e.target.value)},fullWidth:!0}),Object(H.jsx)(xe.CopyToClipboard,{text:n,className:T.margin,children:Object(H.jsx)(b.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(H.jsx)(ye.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(H.jsxs)(O.a,{item:!0,xs:12,md:6,className:T.padding,children:[Object(H.jsx)(d.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(H.jsx)(fe.a,{label:"ID to call",value:S,onChange:function(e){return Y(e.target.value)},fullWidth:!0}),x>-1?i&&!l?Object(H.jsx)(b.a,{variant:"contained",color:"secondary",startIcon:Object(H.jsx)(He.a,{fontSize:"large"}),fullWidth:!0,onClick:m,className:T.margin,children:"Hang Up"}):Object(H.jsx)(b.a,{variant:"contained",color:"primary",startIcon:Object(H.jsx)(we.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return h(S)},className:T.margin,children:"Call"}):Object(H.jsx)(b.a,{disabled:!0,variant:"contained",color:"primary",startIcon:Object(H.jsx)(we.a,{fontSize:"large"}),fullWidth:!0,className:T.margin,children:"Call"})]})]})}),t]})}),Object(H.jsx)("div",{children:Object(H.jsxs)(j.a,{open:D,onClose:A,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(H.jsx)(g.a,{id:"alert-dialog-title",children:"Bookshelf"}),Object(H.jsxs)(u.a,{children:[Object(H.jsxs)(ve.a,{className:T.root,children:[Object(H.jsxs)(Ce.a,{children:[Object(H.jsx)(Ye.a,{component:"img",alt:"Contemplative Reptile",height:"440",image:N,title:"Homework Yuck"}),Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Homework Yuck"}),Object(H.jsx)(d.a,{variant:"body2",color:"textSecondary",component:"p",children:"Jamal made a case at the next open house and it mattered much. Download this free children\u2019s book to read about how he chose to stand his ground and took courage to validate his actions. A little bit of honesty and a little bit of courage had gone a long way in boosting Jamal\u2019s belief in himself. Read more in this free children\u2019s real aloud and be truly inspired."})]})]}),Object(H.jsx)(Ne.a,{children:Object(H.jsx)(b.a,{onClick:function(){k(0),y(0),A()},variant:"contained",size:"large",color:"primary",children:"Select"})})]}),Object(H.jsxs)(ve.a,{className:T.root,children:[Object(H.jsxs)(Ce.a,{children:[Object(H.jsx)(Ye.a,{component:"img",alt:"Hammy the Hamster",height:"440",image:$,title:"Hammy The Hamster"}),Object(H.jsxs)(Se.a,{children:[Object(H.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"h2",children:"Hammy The Hamster"}),Object(H.jsx)(d.a,{variant:"body2",color:"textSecondary",component:"p",children:"He\u2019s got swag. He wears a tux. He\u2019s a hipster hamster who likes to live free. Join Hammy in his South American home as you read this free story book for kids on your next read aloud day."})]})]}),Object(H.jsx)(Ne.a,{children:Object(H.jsx)(b.a,{onClick:function(){k(1),y(0),A()},variant:"contained",size:"large",color:"primary",children:"Select"})})]})]}),Object(H.jsx)(p.a,{children:Object(H.jsx)(b.a,{onClick:A,color:"primary",children:"Close"})})]})})]})},Be=function(){var e=Object(c.useContext)(w),t=e.answerCall,a=e.call,n=e.callAccepted,i=e.book,o=e.bookTitles;return Object(H.jsx)(H.Fragment,{children:a.isReceivingCall&&!n&&Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(H.jsxs)("h3",{children:[a.name," wants to read ",o[i],":"]}),Object(H.jsx)(b.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},De=Object(m.a)((function(e){return{appBar:Object(s.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),pap:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1),width:e.spacing(16),height:e.spacing(16)}},image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),Pe=function(){var e=De(),t=Object(c.useContext)(w),a=t.book,i=(t.setBook,t.pageNumber,t.setPageNumber,t.setStarted),o=t.bookTitles,s=Object(c.useState)(""),m=Object(r.a)(s,2),O=(m[0],m[1],n.a.useState(!0)),f=Object(r.a)(O,2),x=f[0],k=f[1],y=n.a.useState(!1),v=Object(r.a)(y,2),C=(v[0],v[1],function(){i(1),k(!1)});return Object(H.jsxs)("div",{className:e.wrapper,children:[Object(H.jsx)(l.a,{className:e.appBar,position:"static",color:"inherit",children:Object(H.jsx)(d.a,{variant:"h2",align:"center",children:o[a]})}),Object(H.jsx)(he,{}),Object(H.jsx)(Ie,{children:Object(H.jsx)(Be,{})}),Object(H.jsx)("div",{children:Object(H.jsxs)(j.a,{open:x,onClose:C,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(H.jsx)(g.a,{id:"alert-dialog-title",children:"Welcome to Read Along!"}),Object(H.jsxs)(u.a,{children:[Object(H.jsx)(h.a,{id:"alert-dialog-description",children:"Read Along lets you connect with others during social distance over a great book for children."}),Object(H.jsx)(h.a,{id:"alert-dialog-description",children:'Start by selecting a book from the "BOOKSHELF" and then get the ID of the person you would like to call. The ID of a user can by copied from the "COPY YOUR ID" button. Finaly paste the ID of the person you would like to call in the "ID to call" line and hit the "CALL" button.'})]}),Object(H.jsx)(p.a,{children:Object(H.jsx)(b.a,{onClick:C,color:"primary",children:"Got it"})})]})})]})};a(176);o.a.render(Object(H.jsx)(C,{children:Object(H.jsx)(Pe,{})}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.8a0fad1a.chunk.js.map